library(tidyverse)
library(dplyr)
library(ggplot2)
library(lubridate)
# install.packages("fredr")
library(fredr)
# install.packages("DescTools")
library(DescTools)
api_key <- '3949fd9fcfaa43711339ce7b8a243180'
fredr_set_key(api_key)
# Federal Funds Effective Rate (FFER)
ffer_full <- fredr(
series_id = "FEDFUNDS",
frequency = "q",              # quarterly
aggregation_method = "avg",
observation_start = as.Date("1980-01-01")
)
head(ffer_full)
# Personal Consumption Expenditures Index (PCEPI) - Inflation measure
pcepi_full <- fredr(
series_id = "PCEPI",
frequency = "q",
aggregation_method = "avg",
observation_start = as.Date("1980-01-01")
)
head(pcepi_full)
# Real GDP
gdp_full <- fredr(
series_id = "GDPC1",
frequency = "q",
aggregation_method = "avg",
observation_start = as.Date("1980-01-01")
)
head(gdp_full)
# Potential Real GDP
pot_gdp_full <- fredr(
series_id = "GDPPOT",
frequency = "q",
aggregation_method = "avg",
observation_start = as.Date("1980-01-01")
)
head(pot_gdp_full)
# Add pct_chg_pce col to PCE series
t_val <- pcepi_full$value
t_minus_one_val <- lag(pcepi_full$value, 1)
pcepi_full$pct_chg_pce <- (t_val - t_minus_one_val) / t_minus_one_val
# Create GDP output gap series in same format as others
gdp_full <- gdp_full %>% rename(GDPC1 = value)
pot_gdp_full <- pot_gdp_full %>% rename(GDPPOT = value)
head(gdp_full)
gdp_merged <- inner_join(gdp_full, pot_gdp_full, by='date')
# Add Output Gap col to GDP series
gdp_merged$output_gap <- (gdp_merged$GDPC1 - gdp_merged$GDPPOT) * 100 / gdp_merged$GDPPOT
gdp_merged$series_id <- 'OUTPUTGAP'
gdp_merged <- gdp_merged %>% rename(realtime_start = realtime_start.x, realtime_end = realtime_end.x, value=output_gap)
output_gap <- gdp_merged %>% select(date, series_id, value, realtime_start, realtime_end)
ffer_full %>%
ggplot(aes(x = date, y = value)) +
geom_line() +
labs(title = "Federal Funds Effective Rate (FFER)",
x = "date",
y = 'FFER')
ffer_full %>%
summarize(
mean = mean(value, na.rm = TRUE),
var_value  = var(value, na.rm = TRUE),
sd_value   = sd(value, na.rm = TRUE),
n_obs      = n()
)
pcepi_full %>%
ggplot(aes(x = date, y = value)) +
geom_line() +
labs(title = "Personal Consumption Expenditures Index (PCEPI)",
x = "date",
y = 'PCEPI')
pcepi_full %>%
summarize(
mean = mean(value, na.rm = TRUE),
var_value  = var(value, na.rm = TRUE),
sd_value   = sd(value, na.rm = TRUE),
n_obs      = n()
)
pcepi_full %>%
ggplot(aes(x = date, y = pct_chg_pce)) +
geom_line() +
labs(title = "Pct Change PCE",
x = "date",
y = 'Pct Change PCE')
# Do regular GDP, POT GDP, and output gap
gdp_full %>%
ggplot(aes(x = date, y = GDPC1)) +
geom_line() +
labs(title = "Real GDP ",
x = "date",
y = 'GDP')
gdp_full %>%
summarize(
mean = mean(GDPC1, na.rm = TRUE),
var_value  = var(GDPC1, na.rm = TRUE),
sd_value   = sd(GDPC1, na.rm = TRUE),
n_obs      = n()
)
pot_gdp_full %>%
ggplot(aes(x = date, y = GDPPOT)) +
geom_line() +
labs(title = "Potential Real GDP ",
x = "date",
y = 'GDPPOT')
pot_gdp_full %>%
summarize(
mean = mean(GDPPOT, na.rm = TRUE),
var_value  = var(GDPPOT, na.rm = TRUE),
sd_value   = sd(GDPPOT, na.rm = TRUE),
n_obs      = n()
)
output_gap %>%
ggplot(aes(x = date, y = value)) +
geom_line() +
labs(title = "Output gap",
x = "date",
y = 'Output gap')
ensure_same_dates <- ffer_full %>%
full_join(gdp_full, by='date') %>%
full_join(pcepi_full, by='date') %>%
full_join(pot_gdp_full, by='date') %>%
full_join(output_gap, by='date')
sum(is.na(ensure_same_dates$date))
ffer_full
#pcepi_full
#gdp_full
#pot_gdp_full
#output_gap
# # Split into train and test set
ffer_train <- ffer_full %>% filter(date >= as.Date('1980-01-01') & date <= as.Date('2023-10-01'))
ffer_test <- ffer_full %>% filter(date >= as.Date('2024-01-01'))
#  # # Split into train and test set
pcepi_train <- pcepi_full %>% filter(date >= as.Date('1980-01-01') & date <= as.Date('2023-10-01'))
pcepi_test <- pcepi_full %>% filter(date >= as.Date('2024-01-01'))
#  # # Split into train and test set
gdp_train <- gdp_full %>% filter(date >= as.Date('1980-01-01') & date <= as.Date('2023-10-01'))
gdp_test <- gdp_full %>% filter(date >= as.Date('2024-01-01'))
#  # # Split into train and test set
pot_gdp_train <- pot_gdp_full %>% filter(date >= as.Date('1980-01-01') & date <= as.Date('2023-10-01'))
pot_gdp_test <- pot_gdp_full %>% filter(date >= as.Date('2024-01-01'))
# install.packages("aTSA")
library(aTSA)
library(tsibble)
infl_data <- gdp_full %>%
select(date, GDPC1) %>%
left_join(select(pcepi_full, date, pcepi=value, pct_chg_pce),
by='date') %>%
left_join(select(pot_gdp_full, date, GDPPOT), by='date') %>%
left_join(select(output_gap, date, output_gap=value), by='date')
infl_long <- infl_data %>%
pivot_longer(
cols = -date,
names_to = "indicator",
values_to = "value"
) %>%
mutate(
date = yearmonth(date)
)
infl_tsbl_long <- as_tsibble(infl_long, key=indicator, index=date) %>%
arrange(date)
infl_tsbl_wide <- as_tsibble(infl_data, index=date)
adf.test(infl_tsbl_wide$GDPC1)
adf.test(infl_tsbl_wide$pcepi)
adf.test(infl_tsbl_wide$pct_chg_pce)
adf.test(infl_tsbl_wide$GDPPOT)
adf.test(infl_tsbl_wide$output_gap)
ggplot(infl_tsbl_long, aes(date, value)) +
geom_line() +
facet_wrap(~indicator, scales = "free_y")
View(infl_data)
View(infl_data)
View(infl_data)
View(infl_tsbl_long)
View(infl_tsbl_wide)
View(infl_data)
View(infl_tsbl_wide)
View(infl_data)
View(infl_tsbl_wide)
View(infl_data)
View(ffer_full)
View(infl_data)
View(ffer_full)
View(ffer_test)
View(ffer_full)
View(gdp_test)
View(gdp_merged)
View(gdp_full)
View(output_gap)
View(gdp_merged)
View(ffer_full)
View(ffer_full)
View(pcepi_train)
View(pot_gdp_full)
View(gdp_merged)
View(gdp_full)
View(gdp_merged)
View(output_gap)
View(output_gap)
View(ffer_full)
View(ffer_full)
View(gdp_full)
View(output_gap)
View(infl_data)
View(infl_tsbl_wide)
View(infl_tsbl_long)
View(infl_tsbl_wide)
View(infl_data)
